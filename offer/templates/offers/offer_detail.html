<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تفاصيل العرض - {{ offer.title }}</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        :root {
            --primary-color: #FF7A30;
            --secondary-color: #465C88;
            --light-bg: #E9E3DF;
            --dark-text: #000000;
            --light-text: #5a5a5a;
        }
        
        body {
            background-color: var(--light-bg);
        }
        
        .detail-card {
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
            border: none;
            border-radius: 15px;
        }
        
        .card-header {
            background: linear-gradient(135deg, var(--secondary-color), #3a4c72);
            color: white;
            border-radius: 15px 15px 0 0 !important;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, var(--primary-color), #e66a20);
            border: none;
            color: white;
        }
        
        .btn-warning:hover {
            background: linear-gradient(135deg, #e66a20, var(--primary-color));
            color: white;
        }
        
        .alert-info {
            background-color: rgba(70, 92, 136, 0.1);
            border-color: var(--secondary-color);
            color: var(--secondary-color);
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1 class="h2" style="color: var(--secondary-color);">تفاصيل العرض</h1>
            <a href="{% url 'offer:offer-list' %}" class="btn btn-secondary">
                <i class="bi bi-arrow-right"></i> رجوع للقائمة
            </a>
        </div>

        <div class="row justify-content-center">
            <div class="col-md-10">
                <div class="card detail-card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h3 class="h4 mb-0">{{ offer.title }}</h3>
                        <span class="badge {% if offer.is_active %}bg-success{% else %}bg-secondary{% endif %} offer-status">
                            {% if offer.is_active %}عرض نشط{% else %}عرض غير نشط{% endif %}
                        </span>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            {% if offer.image %}
                            <div class="col-md-5 mb-3">
                                <img src="{{ offer.image.url }}" alt="{{ offer.title }}" class="img-fluid rounded">
                            </div>
                            {% endif %}
                            <div class="col-md-{% if offer.image %}7{% else %}12{% endif %}">
                                <div class="row mb-3">
                                    <div class="col-sm-4">
                                        <strong>المنتج:</strong>
                                    </div>
                                    <div class="col-sm-8">
                                        {{ offer.product.name }}
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-sm-4">
                                        <strong>نوع العرض:</strong>
                                    </div>
                                    <div class="col-sm-8">
                                        {{ offer.get_offer_type_display }}
                                    </div>
                                </div>
                                {% if offer.discount_percentage %}
                                <div class="row mb-3">
                                    <div class="col-sm-4">
                                        <strong>نسبة الخصم:</strong>
                                    </div>
                                    <div class="col-sm-8">
                                        {{ offer.discount_percentage }}%
                                    </div>
                                </div>
                                {% endif %}
                                <div class="row mb-3">
                                    <div class="col-sm-4">
                                        <strong>تاريخ البداية:</strong>
                                    </div>
                                    <div class="col-sm-8">
                                        {{ offer.start_date }}
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-sm-4">
                                        <strong>تاريخ النهاية:</strong>
                                    </div>
                                    <div class="col-sm-8">
                                        {{ offer.end_date }}
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-sm-4">
                                        <strong>مثال تطبيقي:</strong>
                                    </div>
                                    <div class="col-sm-8">
                                        <div class="alert alert-info">
                                            {% if offer.offer_type == 'PERCENTAGE' %}
                                            شراء منتجين بسعر {{ offer.apply_offer|floatformat:2 }} بدلاً من {{ offer.product.price|floatformat:2 }} (توفير {{ offer.product.price|floatformat:2 }})
                                            {% elif offer.offer_type == 'BOGO' %}
                                            شراء منتجين بسعر {{ offer.apply_offer|floatformat:2 }} بدلاً من {{ offer.product.price|floatformat:2 }} (احصل على واحد مجاناً)
                                            {% elif offer.offer_type == 'SECOND_HALF' %}
                                            شراء منتجين بسعر {{ offer.apply_offer|floatformat:2 }} بدلاً من {{ offer.product.price|floatformat:2 }} (الثانية بنصف السعر)
                                            {% endif %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="d-flex justify-content-between">
                            <div>
                                <a href="{% url 'offer:offer-edit' offer.pk %}" class="btn btn-warning">
                                    <i class="bi bi-pencil"></i> تعديل
                                </a>
                                <a href="{% url 'offer:offer-delete' offer.pk %}" class="btn btn-danger">
                                    <i class="bi bi-trash"></i> حذف
                                </a>
                            </div>
                            <small class="text-muted">تم الإنشاء في: {{ offer.created_at|date:"Y-m-d" }}</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>